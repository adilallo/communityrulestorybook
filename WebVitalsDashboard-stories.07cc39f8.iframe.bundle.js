"use strict";(self.webpackChunkcommunity_rule=self.webpackChunkcommunity_rule||[]).push([[470],{"./lib/logger.ts"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{v:()=>logger});var console=__webpack_require__("./node_modules/console-browserify/index.js");const logger={debug:(...args)=>{0},info:(...args)=>{console.info(...args)},warn:(...args)=>{console.warn(...args)},error:(...args)=>{console.error(...args)}}},"./stories/WebVitalsDashboard.stories.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Loading:()=>Loading,__namedExportsOrder:()=>__namedExportsOrder,default:()=>WebVitalsDashboard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),logger=__webpack_require__("./lib/logger.ts");const getRatingColor=rating=>{switch(rating){case"good":return"text-green-600 bg-green-50";case"needs-improvement":return"text-yellow-600 bg-yellow-50";case"poor":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},getRatingIcon=rating=>{switch(rating){case"good":return"✅";case"needs-improvement":return"⚠️";case"poor":return"❌";default:return"❓"}},formatValue=(metric,value)=>"cls"===metric?value.toFixed(3):`${value}ms`;function WebVitalsDashboardView({vitals,metrics,loading}){return loading?(0,jsx_runtime.jsx)("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:(0,jsx_runtime.jsxs)("div",{className:"animate-pulse",children:[(0,jsx_runtime.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5].map(i=>(0,jsx_runtime.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,jsx_runtime.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,jsx_runtime.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},i))})]})}):(0,jsx_runtime.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[(0,jsx_runtime.jsx)("h2",{className:"text-2xl font-bold mb-6 text-[var(--color-content-default-primary)]",children:"Web Vitals Dashboard"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:Object.entries(vitals).map(([metric,data])=>(0,jsx_runtime.jsxs)("div",{className:`p-4 border rounded-lg ${getRatingColor(data.rating)}`,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-lg",children:metric.toUpperCase()}),(0,jsx_runtime.jsx)("span",{className:"text-2xl",children:getRatingIcon(data.rating)})]}),(0,jsx_runtime.jsxs)("div",{className:"text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"font-medium",children:["Value: ",formatValue(metric,data.value)]}),(0,jsx_runtime.jsxs)("div",{className:"capitalize",children:["Rating: ",data.rating.replace("-"," ")]})]})]},metric))}),Object.keys(metrics).length>0&&(0,jsx_runtime.jsxs)("div",{className:"mb-6",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold mb-4 text-[var(--color-content-default-primary)]",children:"Historical Metrics"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(metrics).map(([metric,data])=>(0,jsx_runtime.jsxs)("div",{className:"p-4 border rounded-lg bg-[var(--color-surface-default-secondary)]",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold mb-2",children:metric.toUpperCase()}),(0,jsx_runtime.jsxs)("div",{className:"text-sm space-y-1",children:[(0,jsx_runtime.jsxs)("div",{children:["Count: ",data.count]}),(0,jsx_runtime.jsxs)("div",{children:["Average: ",formatValue(metric,data.average)]}),(0,jsx_runtime.jsxs)("div",{children:["Range: ",formatValue(metric,data.min)," -"," ",formatValue(metric,data.max)]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,jsx_runtime.jsxs)("span",{className:"text-green-600",children:["Good: ",data.goodCount]}),(0,jsx_runtime.jsxs)("span",{className:"text-yellow-600",children:["Needs Improvement: ",data.needsImprovementCount]}),(0,jsx_runtime.jsxs)("span",{className:"text-red-600",children:["Poor: ",data.poorCount]})]})]})]},metric))})]}),(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-[var(--color-surface-default-secondary)] rounded-lg",children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold mb-2 text-[var(--color-content-default-primary)]",children:"Performance Guidelines"}),(0,jsx_runtime.jsxs)("ul",{className:"text-sm space-y-1 text-[var(--color-content-default-secondary)]",children:[(0,jsx_runtime.jsxs)("li",{children:["• ",(0,jsx_runtime.jsx)("strong",{children:"LCP:"})," Good < 2.5s, Needs Improvement 2.5-4s, Poor > 4s"]}),(0,jsx_runtime.jsxs)("li",{children:["• ",(0,jsx_runtime.jsx)("strong",{children:"FID:"})," Good < 100ms, Needs Improvement 100-300ms, Poor > 300ms"]}),(0,jsx_runtime.jsxs)("li",{children:["• ",(0,jsx_runtime.jsx)("strong",{children:"CLS:"})," Good < 0.1, Needs Improvement 0.1-0.25, Poor > 0.25"]}),(0,jsx_runtime.jsxs)("li",{children:["• ",(0,jsx_runtime.jsx)("strong",{children:"FCP:"})," Good < 1.8s, Needs Improvement 1.8-3s, Poor > 3s"]}),(0,jsx_runtime.jsxs)("li",{children:["• ",(0,jsx_runtime.jsx)("strong",{children:"TTFB:"})," Good < 800ms, Needs Improvement 800-1800ms, Poor > 1800ms"]})]})]})]})}const WebVitalsDashboard_view=WebVitalsDashboardView;WebVitalsDashboardView.__docgenInfo={description:"",methods:[],displayName:"WebVitalsDashboardView",props:{vitals:{required:!0,tsType:{name:"Vitals"},description:""},metrics:{required:!0,tsType:{name:"Metrics"},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""}}};const createInitialVitals=()=>({lcp:{value:0,rating:"unknown"},fid:{value:0,rating:"unknown"},cls:{value:0,rating:"unknown"},fcp:{value:0,rating:"unknown"},ttfb:{value:0,rating:"unknown"}}),WebVitalsDashboardContainer=(0,react.memo)(()=>{const[vitals,setVitals]=(0,react.useState)(createInitialVitals),[metrics,setMetrics]=(0,react.useState)({}),[loading,setLoading]=(0,react.useState)(!0);return(0,react.useEffect)(()=>{(async()=>{try{const response=await fetch("/api/web-vitals"),data=await response.json();setMetrics(data.metrics||{})}catch(error){logger.v.error("Error fetching web vitals:",error)}finally{setLoading(!1)}})(),__webpack_require__.e(364).then(__webpack_require__.bind(__webpack_require__,"./node_modules/web-vitals/dist/web-vitals.js")).then(webVitals=>{const{getCLS,getFID,getFCP,getLCP,getTTFB}=webVitals;getLCP(metric=>{setVitals(prev=>({...prev,lcp:{value:Math.round(metric.value),rating:metric.rating}}))}),getFID(metric=>{setVitals(prev=>({...prev,fid:{value:Math.round(metric.value),rating:metric.rating}}))}),getCLS(metric=>{setVitals(prev=>({...prev,cls:{value:Math.round(1e3*metric.value)/1e3,rating:metric.rating}}))}),getFCP(metric=>{setVitals(prev=>({...prev,fcp:{value:Math.round(metric.value),rating:metric.rating}}))}),getTTFB(metric=>{setVitals(prev=>({...prev,ttfb:{value:Math.round(metric.value),rating:metric.rating}}))})})},[]),(0,jsx_runtime.jsx)(WebVitalsDashboard_view,{vitals,metrics,loading})});WebVitalsDashboardContainer.displayName="WebVitalsDashboard";const WebVitalsDashboard_container=WebVitalsDashboardContainer;WebVitalsDashboardContainer.__docgenInfo={description:"",methods:[],displayName:"WebVitalsDashboard"};const WebVitalsDashboard_stories={title:"Components/WebVitalsDashboard",component:WebVitalsDashboard_container,parameters:{layout:"fullscreen",docs:{description:{component:"A comprehensive dashboard component that displays real-time and historical Web Vitals data. Shows Core Web Vitals metrics, performance ratings, and optimization recommendations."}}},argTypes:{}},Default={args:{},parameters:{docs:{description:{story:"The default Web Vitals dashboard showing real-time performance metrics and historical data."}}}},Loading={args:{},parameters:{docs:{description:{story:"The dashboard in loading state while fetching Web Vitals data."}}}},__namedExportsOrder=["Default","Loading"]}}]);